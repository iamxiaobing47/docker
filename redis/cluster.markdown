# slot

## 什么是 Redis Slot？

Redis 集群中的每个数据项都存储在一个特定的槽中。Redis 集群总共有 16384 个槽，每个槽可以存储一个或多个键值对。当客户端向 Redis 集群发送一个键值对时，Redis 会根据键的名称计算出一个哈希值，然后根据这个哈希值将键映射到一个特定的槽中。

## 槽的分配

1. **哈希标签**：Redis 集群使用哈希标签来确定键应该存储在哪个槽中。哈希标签是键的一部分，通常是一个 `{}` 括起来的字符串，它位于键的末尾。例如，`user:{username}` 这个键的哈希标签是 `{username}`。

2. **哈希函数**：Redis 先对 key（有效值）使用 CRC16 算法算出一个结果，然后把结果对 16384 求余数，这样每个 key 都会对应一个编号在 0-16383 之间的哈希槽

3. **槽的分布**：Redis 集群中的每个节点负责一部分槽。例如，如果有三个节点，每个节点可能负责 5461 个槽（16384 / 3）

## 槽的查询

客户端可以通过发送 `CLUSTER SLOTS` 命令来查询集群中槽的分布情况